<META HTTP-EQUIV="expires" CONTENT="0">
<html>
<A name = "top"></A>
<title> CS255 Syllabus </title>
<body
text = "#000000"
link="#00ff00"
vlink="#f00000"
bgcolor="#ffffff"
>

<H3>
<HR>
<TT>If</TT>-statement with a compound condition with an AND clause
<HR>
</H3>
<UL>
<P>

<P>
<LI> <FONT COLOR="darkmagenta"><B>
     Compound boolean condition
     </B></FONT>
<P>
<UL>


<LI> A <B>compound</B> condition (or Boolean expression) 
	is one where different relationships
	are combined using <FONT color="red"><B>logical operators</B></FONT> 
 <P>
    The <FONT color="red"><B>logical operators</B></FONT> are:
<P>
<UL>
<TABLE bgcolor="lightyellow" BORDER="5">
<TR> <TD>
 <UL>
 <LI> <B>or</B>
 <LI> <B>and</B> 
 <LI> <B>not</B> 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
 </UL>
</TD> </TR>
</TABLE>
</UL>
<P>
</UL>
<P>
<HR>
<HR>
<HR>
<HR>
<P>
<LI> <FONT COLOR="darkmagenta"><B>
     Short-circuit boolean evaluation
     </B></FONT>
<P>
<UL>
<LI> 
 The <FONT color="red"><B>"short circuit boolean evaluation"</B></FONT>
     is a <FONT color="blue"><B>technique </B></FONT> that is
     <FONT color="red"><B>commonly used</B></FONT>
    in <FONT color="blue"><B>high level programming languages</B></FONT>
     (such as
	C, C++, Java) to evaluate 
	<FONT color="red"><B>compound boolean expressions</B></FONT>
 <P>
<P>
<UL>
<TABLE bgcolor="#FFEEEE" BORDER="5">
<TR> <TD>

 <UL>
 <LI> When <FONT color="red"><B>evaluating</B></FONT> a
    <FONT color="blue"><B>boolean expression</B></FONT>
    that contains
    <FONT color="red"><B><TT>AND</TT></B></FONT> and
    <FONT color="red"><B><TT>OR</TT></B></FONT> operations,
    the
    <FONT color="blue"><B>boolean expression evaluation </B></FONT> can
    be <FONT color="red"><B>terminiated <I>prematurely</I></B></FONT>
    for some <FONT color="blue"><B>outcome</B></FONT> of
    the <FONT color="red"><B><I>left</I> hand side</B></FONT> of the
    <B>compound clause</B>
 </UL>

</TD> </TR>
</TABLE>
</UL>
<P>
I will <FONT color="red"><B>explain</B></FONT> this
 <FONT color="blue"><B><I>premature</I> termination</B></FONT> with
 an <FONT color="red"><B>example</B></FONT>.
<P>
In <FONT color="red"><B>this webpage</B></FONT>, I will
 explain the
 <FONT color="blue"><B><I>premature</I> termination</B></FONT> 
 when the <FONT color="red"><B>boolean expression</B></FONT> has the form:
<P>
<UL>
<TABLE bgcolor="#CCFFCC" BORDER="5">
<TR> <TD>

<FONT color="blue">
<B>
<PRE>
    LHS (left hand side) <FONT color="red">AND</FONT> ....          
</PRE>
</B>
</FONT>

</TD> </TR>
</TABLE>
</UL>
<P>
In the <FONT color="red"><B>next webpage</B></FONT>,
 I will  explain the
 <FONT color="blue"><B><I>premature</I> termination</B></FONT> 
 when the <FONT color="red"><B>boolean expression</B></FONT> contains
 an <FONT color="blue"><B><TT>OR</TT></B></FONT> operator.
</UL>
<P>
<HR>
<HR>
<HR>
<HR>
<P>
<LI> <FONT COLOR="darkmagenta"><B>
     Short-circuit evaluation for an <TT>AND</TT> clause
     </B></FONT>
<P>
<UL>

 <LI> Consider this   <FONT color="red"><B><TT> if</TT>-statement</B></FONT>
       with an <FONT color="blue"><B>and</B></FONT> logical operator:
<P>
<UL>
<TABLE bgcolor="lightyellow" BORDER="5">
<TR> <TD>

<FONT color="blue">
<B>
<PRE>
   if ( cond <FONT color="red">and</FONT> "Other conditions" )       
      statement1;
   else
      statement2;
</PRE>
</B>
</FONT>

</TD> </TR>
</TABLE>
</UL>
<P>
The <FONT color="red"><B>compound condition</B></FONT> is:
<P>
<UL>
<TABLE bgcolor="#CCFFCC" BORDER="5">
<TR> <TD>

<FONT color="blue">
<B>
<PRE>
    cond  <FONT color="red">and</FONT>  "Other conditions"           
</PRE>
</B>
</FONT>

</TD> </TR>
</TABLE>
</UL>
<P>
When we <FONT color="red"><B>evaluation</B></FONT> the
 <FONT color="blue"><B>condition <TT>cond</TT></B></FONT> at the
  <FONT color="red"><B><I>left</I> hand side</B></FONT>, there are
  <FONT color="blue"><B>2 possible outcomes</B></FONT>:
<P>
<UL>
<TABLE bgcolor="lightcyan" BORDER="5">
<TR> <TD>

 <OL>
 <LI> <FONT color="red"><B><TT>cond</TT> &equiv; true</B></FONT>:
<P>
<UL>
<TABLE bgcolor="lightyellow" BORDER="5">
<TR> <TD>

 <UL>
 <LI> In this case, we <FONT color="red"><B>must</B></FONT> evaluate the
  <FONT color="blue"><B>"Other conditions"</B></FONT> to determine the
  outcome of
  <FONT color="blue"><B><TT>cond  <FONT color="red">and</FONT>
    "Other conditions"</TT></B></FONT>
 </UL>

</TD> </TR>
</TABLE>
</UL>
<P>
<HR>
<P>
 <LI> <FONT color="red"><B><TT>cond</TT> &equiv; false</B></FONT>:
<P>
<UL>
<TABLE bgcolor="lightyellow" BORDER="5">
<TR> <TD>

 <UL>
 <LI> In this case, we <FONT color="red"><B>know</B></FONT>  the
  outcome of
  <FONT color="blue"><B><TT>cond  <FONT color="red">and</FONT>
    "Other conditions"</TT></B></FONT>
    <FONT color="red"><B>&equiv; false</B></FONT> !!!
 <P>
 (Because <FONT color="blue"><B><TT>false <FONT color="red">and</FONT> any-boolean-value
   <FONT color="red">&equiv; false</FONT></TT></B></FONT>)
 </UL>

</TD> </TR>
</TABLE>
</UL>
<P>

 </OL>

</TD> </TR>
</TABLE>
</UL>
<P>
So in the case that
 <FONT color="red"><B><TT>cond &equiv; false</TT></B></FONT>,
 we can take the
  <FONT color="blue"><B><TT>else</TT></B></FONT> branch of the program flow
  <FONT color="red"><B>immediately</B></FONT> 
 (and terminate the boolean evaluation 
  <FONT color="blue"><B>prematurely</B></FONT> !!!)
<P>
<HR>
<HR>
<P>
<LI> We can <FONT color="red"><B>use</B></FONT> this
   <FONT color="blue"><B><I>short</I>-circuit boolean evalation</B></FONT> to
   draw up the  following
 <FONT color="red"><B>program flow control</B></FONT> where we
   make the <FONT color="blue"><B>branch decision</B></FONT>
   <FONT color="red"><B><I>immediately</I></B></FONT>
   after evaluating a
   <FONT color="blue"><B> part</B></FONT> of the
   <FONT color="red"><B>boolean expression</B></FONT>:
   
<P>
<UL>
<TABLE bgcolor="#FFEEEE" BORDER="5">
<TR>
<TD>
<B> <FONT color="blue">
<PRE>

   if ( cond <FONT color="red">and</FONT> "Other conditions" )   ---->        |
      statement1;                                    V
   else				              +--------------+     <FONT color="red">FALSE</FONT> 
      statement2;		              |   eval cond  |-----------------+    
					      +--------------+	               |
				                     | (TRUE)		       |
						     |		               |
						     V                         |
                                              +--------------+ FALSE           |
					      |eval OtherCond|------------+    |
					      +--------------+            |    |
				                     | (TRUE)		  |    |
						     |		          |    |
						     V		          |    |
				                 statement1 		  |    |
				                     |                    |    |
			                   +---------+                    |    |
			                   |	                          |    |
					   |	                          |    |
					   |	 statement2 <-------------+----+   
					   |	     |
					   |	     |
					   +-------->+
				                     |
						     |
						     V
</PRE>
</FONT> </B>
</TD> </TR>
</TABLE>
</UL>
<P>
<HR>
<HR>
<P>
<LI> The <FONT color="red"><B>assembler construct</B></FONT>
    that <FONT color="blue"><B>realizes</B></FONT> the 
   <FONT color="red"><B>program control flow</B></FONT>
     of the 
       <FONT color="blue"><B><TT>if</TT>-statement</B></FONT> 
	with an 
       <B>compound condition</B>
     <FONT color="red"><B><TT>"cond  and   OtherConditions"</TT></B></FONT> is as follows:

<P>
<UL>
<TABLE bgcolor="lightcyan" BORDER="5">
<TR>
<TD>
<B> <FONT color="blue">
<PRE>

      Evaluate <FONT color="red">"cond"</FONT> (use <FONT color="red">cmp</FONT>)

							  <FONT color="red"> FALSE</FONT>
      Branch on <FONT color="red">FALSE</FONT> outcome of <FONT color="red">"cond"</FONT> to label B:  -------------+   
		| (TRUE)				          |
		| 					          |
		V					          |
      Evaluate "OtherCOnditions" (another <FONT color="red">cmp</FONT>)	                  |
                                                                  |
							  <FONT color="red">FALSE</FONT>   |
      Branch on <FONT color="red">FALSE</FONT>  outcome of "theRest" to label B: --------->|
		| (TRUE)					  |
		| 						  |
		V						  |
  A:       "statement1" assembler code 			          |
		|						  |
	Branch always to label C:  --------------+		  |
       		 				 |		  |
       		 				 |		  |
  B:       "statement2" assembler code <---------|----------------+
                |				 |
                V				 |
  C:            +<-------------------------------+
		|
		V
</PRE>
</FONT> </B>
</TD> </TR>
</TABLE>
</UL>
<P>
The <FONT color="blue"><B>label <TT>A</TT></B></FONT> is 
 <FONT color="red"><B>not used</B></FONT>, but I put it in the
 <FONT color="blue"><B>flow chart</B></FONT> to mark the <B>start</B> of the
 <FONT color="red"><B><TT>then</TT>-part</B></FONT> of the
 <FONT color="blue"><B>high level language program</B></FONT>
<P>
We will code an example to make things clearer.
<P>
(In class, you will see me <FONT color="red"><B>develop</B></FONT> the
 <FONT color="blue"><B>code</B></FONT> interactively - with explanations while I am
 writing the assembler instructions.
Unfortunately, I can't do that on a webpage....)
</UL>

<P>
<HR>
<HR>
<HR>
<HR>
<P>
<LI> <FONT COLOR="darkmagenta"><B>
     If-statement with an <TT>AND</TT> clause - assembler example
     </B></FONT>
<P>
<UL>

<P>
<LI> <FONT color="red"><B>High level programming langange</B></FONT>:
<P>
<UL>
<TABLE bgcolor="lightyellow" BORDER="5">
<TR> <TD>

<FONT color="blue">
<B>
<PRE>
   int x, y, a; 

   if (a <= x <FONT color="red">and</FONT> x <= b)              
      x = x + 1;
   else
      x = x - 1;
</PRE>
</B>
</FONT>

</TD> </TR>
</TABLE>
</UL>
<P>

The <FONT color="red"><B>flow chart</B></FONT> of the
 <B>above program</B> is:
<P>
<UL>
<TABLE BORDER="5">

<TR> <TD>
<IMG SRC="FIGS/if-and1.gif"></IMG>
</TD> </TR>

</TABLE>
</UL>
<P>

<P>
The 
 <FONT color="red"><B>assembler program code</B></FONT>
  for this 
  <FONT color="blue"><B>compound if-statement</B></FONT> is:
<P>
<UL>
<TABLE bgcolor="lightcyan" BORDER="5">
<TR> <TD>

<FONT color="blue">
<B>
<PRE>
/* --------------------------------------------------
   if (a <= x and x <= b)
      x = x + 1;
   else
      x = x - 1;
   -------------------------------------------------- */
        .text
main:
        // Test if (a <= x )
        movw    r0, #:lower16:a
        movt    r0, #:upper16:a         // r0 = addr(a)
        ldr     r0, [r0]                // r0 = a

        movw    r1, #:lower16:x
        movt    r1, #:upper16:x         // r1 = addr(x)
        ldr     r1, [r1]                // r1 = x

        cmp     r0, r1                  // a <= x ?
        <FONT color="red">bgt     else                    // Branch to "else" if  a > x</font>

        // test if ( x <= b )
        movw    r0, #:lower16:x
        movt    r0, #:upper16:x         // r0 = addr(x)
        ldr     r0, [r0]                // r0 = x

        movw    r1, #:lower16:b
        movt    r1, #:upper16:b         // r1 = addr(b)
        ldr     r1, [r1]                // r1 = b

        cmp     r0, r1                  // x <= b ?
        <FONT color="red">bgt     else                    // Branch to "else" if  x > b</font>

then:
        <FONT color="red">// x = x + 1</FONT>
        movw    r0, #:lower16:x
        movt    r0, #:upper16:x         // r0 = addr(x)

        ldr     r1, [r0]                // r1 = x
        add     r1, r1, #1              // r1 = x+1
        str     r1, [r0]                // x = x+1

       <FONT color="red"> b       ifEnd                   // ** SKIP over the else part !!! ***</FONT>

<FONT color="red">else:</FONT>
        <FONT color="red">// x = x - 1</FONT>
        movw    r0, #:lower16:x
        movt    r0, #:upper16:x         // r0 = addr(x)

        ldr     r1, [r0]                // r1 = x
        sub     r1, r1, #1              // r1 = x-1
        str     r1, [r0]                // x = x-1

<FONT color="red">ifEnd:</FONT>

/* --------------------------------------------------
   Begin of the permanent program variables
   -------------------------------------------------- */
        .data
x:      .4byte  15        // Try x outside    10 ... 20
a:      .4byte  10
b:      .4byte  20

        .end
</PRE>
</B>
</FONT>

</TD> </TR>
</TABLE>
</UL>
<P>
 <P>
 <HR>
 <P>
 <LI> <FONT color="#00a000"><B> Example Program: </B></font>
      (Demo above code)
      &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp
      &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp
      <SUB><SUB><SUB>
        <IMG SRC="../../../Common/Example.jpg"></IMG>
        </SUB></SUB></SUB>
  <P>
  <UL>
  <LI> Prog file:
     <FONT color="red"><B><TT>
     /home/cs255001/demo/asm/6-if/if-and.s
     </TT></B></FONT>
  </UL>
<P>
 <B>How to run the program:</B>
<P>
<UL>
<TABLE bgcolor="#CCFFCC" BORDER="5">
<TR> <TD>

 <UL>

 <LI> To compile: 
  &nbsp; <FONT color="red"><B><TT>as255 if-and</TT></B></FONT>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
 <LI> To run: 
 use
  <FONT color="red"><B><TT>EGTAPI</TT></B></FONT>
 </UL>

</TD> </TR>
</TABLE>
</UL>
<P>
</UL>



</UL>
<HR>
<HR>
<HR>
<HR>
<P>
