<META HTTP-EQUIV="expires" CONTENT="0">
<html>
<A name = "top"></A>
<title> CS255 Syllabus </title>
<body
text = "#000000"
link="#00ff00"
vlink="#f00000"
bgcolor="#ffffff"
>

<H2>
<HR>
Floating Point Numbers
<HR>
</H2>
<UL>
<P>

<LI> <FONT COLOR="darkmagenta"><B>
     Representing <I>decimal</I> point numbers representation
     </B></FONT>
<P>
<UL>

 <LI> A <FONT color="blue"><B>floating point number</B></FONT>
      can be written as
      <FONT color="red"><B>2 numbers</B></FONT>:
<P>
<UL>
<TABLE bgcolor="lightyellow" BORDER="5">
<TR> <TD>

 <UL>
 <LI> An <FONT color="red"><B>exponent</B></FONT>, &nbsp;&nbsp; and
&nbsp;&nbsp;&nbsp;&nbsp;
 <LI> A <FONT color="red"><B>mantissa</B></FONT>
 </UL>

</TD> </TR>
</TABLE>
</UL>
<P>

 <LI> <B>Example:</B>
<P>
<UL>
<TABLE bgcolor="lightcyan" BORDER="5">
<TR> <TD>

 <UL>
 <LI>  314.159 = 0.314159 x 10<SUP>3</SUP> = 314159 x 10<SUP>-3</SUP>
 </UL>

</TD> </TR>
</TABLE>
</UL>
<P>
(Remember that <FONT color="blue"><B>multiply/dividing by 10</B></FONT>
 with <B>decimal number</B> can be accomplished by
 <FONT color="red"><B>shifting the decimal point
 one place to right/left</B></FONT>)
<HR>


 <P>
 <LI> We <FONT color="blue"><B>do not</B></FONT>
     need to record the fact that the 
      <FONT color="red"><B>exponent
	used is 10</B></FONT>
	(it is <FONT color="darkred"><B>assumed</B></FONT>)
  <P>
   Then, we can represent the number 314.159
	using a 
   <FONT color="red"><B>pair of numbers</B></FONT>:
<P>
<UL>
<TABLE bgcolor="lightyellow" BORDER="5">
<TR> <TD>

 <UL>
 <LI> 314.159 = <FONT color="blue"><B>(314.159, 0)</B></FONT>
      = <FONT color="blue"><B>(0.314159, 3)</B></FONT> = 
    <FONT color="blue"><B>(314159, -3)</B></FONT>
 </UL>

</TD> </TR>
</TABLE>
</UL>
<P>

  <P>
  The <FONT color="blue"><B>first number</B></FONT> is the 
   <FONT color="red"><B>mantissa</B></FONT>
   and the <FONT color="blue"><B>second</B></FONT>
   is the <FONT color="red"><B>exponent</B></FONT>.
 <P>
 </UL>
 <P>
<HR>
<P>
<HR>
<HR>
<P>
<LI> <FONT COLOR="darkmagenta"><B>
     Representing <I>binary</I> floating point numbers
     </B></FONT>
<P>
<UL>

 <LI> <FONT color="blue"><B>Binary floating point numbers</B></FONT>
      can also be written 
	as an <B><I>exponent</I></B>
	and a <B><I>mantissa</I></B>,
	but now using 
	<FONT color="red"><B>powers of 2</B></FONT>
	(instead of 10 for <B><I>decimal</I> numbers</B>):
 <P>
 <LI> <B>Example:</B>
<P>
<UL>
<TABLE bgcolor="lightyellow" BORDER="5">
<TR> <TD>

 <UL>
 <LI> 1010.1011 = 0.10101011 x 2<SUP>4</SUP> 
	= 10101011 x 2<SUP>-4</SUP>
 </UL>

</TD> </TR>
</TABLE>
</UL>
<P>
(Similarly, <FONT color="blue"><B>multiply/dividing by 2</B></FONT>
 with <B><I>binary</I> number</B> can be accomplished by
 <FONT color="red"><B>shifting the decimal point
 one place to right/left</B></FONT>)
 <P>
 <LI> Again, we 
   <FONT color="blue"><B>do not need</B></FONT>
   to record the fact that the <FONT color="red"><B>exponent
	used is 2</B></FONT>
	(because every number inside the computer is
	in binary).
<P>
  We can represent the number 1010.1011
	using a <FONT color="red"><B>pair of binary numbers</B></FONT>:
<P>
<UL>
<TABLE bgcolor="lightcyan" BORDER="5">
<TR> <TD>

 <UL>
 <LI> 1010.1011 = <FONT color="red"><B>(1010.1011, 0)</B></FONT>
    = <FONT color="red"><B>(0.10101011, 00000100 (4) )</B></FONT>
		= <FONT color="red"><B>(10101011, 11111100 (-4) )</B></FONT>
 </UL>

</TD> </TR>
</TABLE>
</UL>
<P>

	
  <P>
  The first number is the mantissa and the second is the exponent.
 <P>
 </UL>
 <P>
<P>
<HR>
<HR>
<HR>
<HR>
<P>
<LI> <FONT COLOR="darkmagenta"><B>
     Standardizing a floating point representation
     </B></FONT>
<P>
<UL>
<LI> From the previous discussion, we can see that:
<P>
<UL>
<TABLE bgcolor="lightyellow" BORDER="5">
<TR> <TD>

 <UL>
 <LI> There are <FONT color="red"><B>many ways</B></FONT> to
     represent the <FONT color="blue"><B><I>same</I> floating point </B></FONT>
     value.
 </UL>

</TD> </TR>
</TABLE>
</UL>
<P>
<LI> In order to <FONT color="red"><B>exchange</B></FONT>
     <FONT color="blue"><B> floating point</B></FONT>
    information, computer scientists have 
    established an
    <FONT color="red"><B><I>international</I> standard</B></FONT>
    to represent (= encode)
    <FONT color="blue"><B>floating point numbers</B></FONT>
<P>
<LI> This <FONT color="red"><B>international standard</B></FONT> is the
     <FONT color="blue"><B>IEEE 754</B></FONT> 
     standard:
   <A HREF="https://en.wikipedia.org/wiki/IEEE_754">
   <FONT color="red"><B>click here</B></FONT></A> 
</UL>


<P>
<HR>
<HR>
<HR>
<HR>
<P>
<LI> <FONT COLOR="darkmagenta"><B>
     The IEEE 754 Standard for floating point representation
     </B></FONT>
<P>
<UL>

 <LI> <FONT color="red"><B>IEEE</B></FONT> is a 
       <FONT color="blue"><B>standard making organization</B></FONT>
	(<FONT color="red"><B>Institute of Electric and
     Electronics Engineers</B></FONT>).
 <P>
 <LI> IEEE has defined a number of floating point number formats
	(single precision and double precision)
 <P>
<HR>
<HR>
<P>
 <LI> The <FONT color="red"><B>IEEE Single Precision represention</B></FONT>:
<P>
<UL>
<TABLE bgcolor="lightyellow" BORDER="5">
<TR> <TD>
 <UL>
 <LI> Uses 32 bits (4 bytes)
 <P>
 <LI> <FONT color="blue"><B>Format:</B></FONT>
<P>
<UL>
<TABLE bgcolor="lightcyan" BORDER="5">
<TR> <TD>

<FONT color="blue">
<B>
<PRE>
         <FONT color="red">S EEEEEEEE MMMMMMMMMMMMMMMMMMMMMMM </FONT>     
  Bit:   0 1      8 9                    31

  <FONT color="red">S</FONT> = sign of the mantissa (1 bit)
  <FONT color="red">M</FONT> = mantissa (23 bits)
  <FONT color="red">E</FONT> = exponent (8 bits)
</PRE>
</B>
</FONT>

</TD> </TR>
</TABLE>
</UL>
<P>

 <LI> The <FONT color="red"><B>mantissa</B></FONT>
   uses the <FONT color="blue"><B><B>sign/magnitude</B>
   representation</B></FONT>:
   (See: <A HREF="signed.html"> click here</A>)
 <UL>
 <LI> <FONT color="red"><B><TT>S</TT></B></FONT> = the
    <FONT color="blue"><B>sign</B></FONT> of the mantissa
 <LI> <FONT color="red"><B><TT>MMMM...M</TT></B></FONT> =
    the <FONT color="blue"><B>magnitude</B></FONT> of the
    mantissa
  </UL>
<P>
 <LI> The <FONT color="blue"><B>mantissa</B></FONT>
     is <FONT color="red"><B>always</B></FONT> a
      <FONT color="blue"><B>fixed point</B></FONT>
      <FONT color="red"><B>binary number</B></FONT>
      between <FONT color="blue"><B>1</B></FONT> and
      <FONT color="blue"><B>2</B></FONT>:

<P>
<UL>
<TABLE bgcolor="#FFEEEE" BORDER="5">
<TR> <TD>

 <UL>
 <LI> In other words:   <FONT color="darkmagenta"><B>1.0 <= M < 2.0</B></FONT>
<P>
<B>I.e.:</B>
<UL>
<TABLE bgcolor="#CCFFCC" BORDER="5">
<TR> <TD>

 <UL>
 <LI> The <FONT color="red"><B>mantissa</B></FONT> is
  <FONT color="blue"><B>always</B></FONT>
  of the form
   <FONT color="red"><B>1.xxxxxxxxxxx</B></FONT>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
 </UL>

</TD> </TR>
</TABLE>
</UL>
<P>

 <LI> <FONT color="red"><B>Because</B></FONT> the
 <FONT color="blue"><B>mantissa</B></FONT> will
   <FONT color="red"><B><I>always</I></B></FONT> start with
   <FONT color="blue"><B>1.xxxxxxx</B></FONT>,
   the
   <SPAN style="BACKGROUND-COLOR: yellow">
    <FONT color="red"><B>leading  "1"</B></FONT> of
 the <FONT color="blue"><B>mantissa</B></FONT>
     is <FONT color="red"><B>omitted</B></FONT></SPAN> 
   (= not stored, but assumed to be present !)
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
 </UL>

</TD> </TR>
</TABLE>
</UL>
<P>


<P>
 <LI> The <FONT color="blue"><B>exponent <TT>EEEEEEEE</TT></B></FONT>
    uses the <FONT color="red"><B>
  <I>excess 127</I> encoding scheme</B></FONT> for
    <FONT color="darkmagenta"><B>signed numbers</B></FONT> that 
    is <B><I>similar</I></B> to the
 <FONT color="red"><B>2's complement representation</B></FONT>.
<P>
 The <FONT color="red"><B>excess 127 encoding </B></FONT> for
 <FONT color="blue"><B>8 bits</B></FONT>:
<P>
<UL>
<TABLE bgcolor="lightcyan" BORDER="5">
<TR> <TD>

<FONT color="blue">
<B>
<PRE>
   Bit pattern       Encodes the value
  -------------------------------------        
   00000000          -127
   00000001          -126
   ....
   01111111          0
   10000000          1
   10000001          2
   ....
   11111111          128
</PRE>
</B>
</FONT>

</TD> </TR>
</TABLE>
</UL>
<P>

 </UL>

</TD> </TR>
</TABLE>
</UL>
<A NAME="float15"></A>
<P>
<HR>
<P>
<LI> <B>Example:</B>
<P>
<UL>
<TABLE bgcolor="#CCFFCC" BORDER="5">
<TR> <TD>

<FONT color="blue">
<B>
<PRE>
     Given the following floating point representation:

         01000000101000000000000000000000
     =   0 10000001 01000000000000000000000
         ^ ^^^^^^^^ ^^^^^^^^^^^^^^^^^^^^^^^
         | exponent  mantissa (with leading "1." omitted)
       sign

<HR>
     Meaning of each bit according to the IEEE format:

         <FONT color="red">S EEEEEEEE MMMMMMMMMMMMMMMMMMMMMMM </FONT>  
         0 10000001 01000000000000000000000   
  Bit:   0 1      8 9                    31

<HR>

     Sign of mantissa = 0 (positive mantissa)

     Mantissa bits = 01000000000000000000000

     Actual mantissa:   <FONT color="red">1.</FONT>01000000000000000000000 <FONT color="red">(leading 1. was omitted !!)</FONT>     
                      = 1.01

     Exponent = 10000001  (= 129<sub>(10)</sub> = 127<sub>(10)</sub> + 2<sub>(10)</sub>)

     Value represented by Exponent = 2 (decimal)

<HR>

  Therefore:

     value represented = 1.01 (binary)  with exponent 2<sup>2</sup>
                       = 101  (binary)
		       = 5 (decimal)
</PRE>
</B>
</FONT>

</TD> </TR>
</TABLE>
</UL>
<P>



<B>Hands-on experimention:</B>
<A HREF="https://www.h-schmidt.net/FloatConverter/IEEE754.html" target="_blank">
 <FONT color="red"><B>click here </B></FONT>
</A>



<P>
<HR>
<HR>

<P>
 <LI> The IEEE Double Precision represention:
 <P>
  <UL>
  <LI> Uses 64 bits, and it is similar to the single precision format
 <B><FONT COLOR="blue">
 <PRE>
    S EEEEEEEEEEE FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF
    0 1        11 12                                                63
 </PRE></FONT>
 </B>
 <LI> The first bit is the sign bit, S of the <B>mantissa</B>
 <LI> The next 11 bits are the exponent bits, 'E', 
 <LI> The final 52 bits are the mantissa 'M':
 <LI> The mantissa is normalized so that 1.0 <= M < 2.0

  </UL>
  </UL>
 <P>
 <HR>
 <P>
 <LI> <FONT color="#00a000"><B> Example Program: </B></font>
      (Demo above code)
      &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp
      &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp
      <SUB><SUB><SUB>
        <IMG SRC="../../../Common/Example.jpg"></IMG>
        </SUB></SUB></SUB>
  <P>
  <UL>
  <LI> Prog file:
       <FONT color="red"><B><TT>
       /home/cs255001/demo/asm/1-directives/float.s
       </TT></B></FONT>
  </UL>
<P>
 <B>How to run the program:</B>
<P>
<UL>
<TABLE bgcolor="#CCFFCC" BORDER="5">
<TR> <TD>

 <UL>

 <LI> To compile: 
  &nbsp; <FONT color="red"><B><TT>as255 float</TT></B></FONT>
  &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
 <LI> To run: 
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; use
  <FONT color="red"><B>EGTAPI</B></FONT>
 </UL>

</TD> </TR>
</TABLE>
</UL>
<P>
Use the <B>Variable</B> display window to
 show the content (= bit pattern) stored in the variable
 <FONT color="red"><B><TT>floatCost</TT></B></FONT> as
 <FONT color="blue"><B>binary Signed Int</B></FONT> and
 as <FONT color="red"><B>Float</B></FONT>
<P>
Try it with different values.
<P>
This demo shows that:
<P>
<UL>
<TABLE bgcolor="lightyellow" BORDER="5">
<TR> <TD>

 <UL>
 <LI> When the <FONT color="blue"><B>programmer</B></FONT> write
     a <FONT color="red"><B>floating point number</B></FONT> in the
     program, the <FONT color="blue"><B>assembler</B></FONT> translates
     the number into its
     <FONT color="red"><B>IEEE 754 representation</B></FONT> (and store
  this binary pattern in memory) !!!

 </UL>

</TD> </TR>
</TABLE>
</UL>
<P>

<P>
<HR>
<HR>
<P>
<LI> <B>Explore further....</B>
 <P>
 Here is a nice webpage where you can construct floating point 
	representations:
 <A HREF="http://www.mathcs.emory.edu/~cheung/Courses/170/Syllabus/04/IEEE-float/IEEE-754-encoding.html">
 <FONT color="red"><B>click here </B></FONT>
</A>


  <P>
  When you explore the above webpage, you must know
  that there are 2 things that are strange in the IEEE float representation
  <P>
  <OL>
  <LI> Because the first bit of the mantissa is always 1
	(stop, think, why is that so ? because we made it so:
	1.0 <= mantissa < 2.0), it is not stored.
    <P>
    So if the mantissa bits in a single precision representation are
	01010101010101010101010,
	the actual mantissa bits are <B>1</B>.01010101010101010101010
     (and the mantissa is between 1.0 and 2.0)
   <P>
   <LI> The exponent uses a modified 2's complement encoding, called
	"excess" encoding.
    <P>
      The single precision exponent uses the "excess 127" encoding
	which uses 01111111 to represent 0:
  </OL>
<B><FONT COLOR="blue">
<PRE>
Bit pattern:
    01111100   01111101   01111110   01111111   10000000   10000001   10000010
    ----+----------+----------+----------+----------+----------+----------+-
       -3         -2         -1          0          1          2          3
Value represented:
</PRE>
</FONT></B>
</UL>
<HR>
<HR>
<HR>
<HR>
